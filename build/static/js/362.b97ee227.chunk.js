"use strict";(self.webpackChunkdaks_ndt_frontend=self.webpackChunkdaks_ndt_frontend||[]).push([[362],{4981:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var t=s(2555),l=s(5043),i=s(3216),c=s(4227),n=s(579);const r={calibration_block:{navigation:"reference-standards",categories:["UT Calibration Blocks","PAUT Calibration Blocks","TOFD Calibration Blocks","MT/PT Calibration Blocks","ET Calibration Blocks","ECT/RFT/MFL Calibration Tubes","APR Reference Tubes","AUT-Z Reference Blocks"]},flawed_specimen:{navigation:"flawed-specimens",categories:["Training and Examination Flawed specimens","Ultrasonic Testing Flawed specimens","Dye Penetrant Flawed specimens","Eddy Current Flawed specimens","Radiography Flawed specimens","Visual testing Flawed specimens","Paut and ToFD Flawed specimens","NDT Flawed Specimens Kit","UT Flawed Specimens Kit","NDT Standards Flawed Specimens Kit","MT Flawed Specimens Kit","PT Flawed Specimens Kit","RT Flawed Specimens Kit","ET Flawed Specimens Kit","PAUT and ToFD Flawed Specimens Kit","Welded Specimens","Base Material Flawed Specimens","Advanced NDT Validation Specimens","POD & Training Specimens"]},validation_block:{navigation:"validation-blocks",categories:["UT Validation Blocks","PAUT and ToFD Validation Blocks","Boiler Tube PAUT Validation Blocks"]}},o=["Carbon Steel","Stainless Steel 304","Stainless Steel 316","Aluminum 6061","Aluminum 7075","Titanium","Inconel","Copper","Brass","Steel 1018","Steel 4340","Duplex Steel","Chrome Moly Steel","Nickel Alloy","Monel","Hastelloy","Zirconium","Cast Iron","Tool Steel","Spring Steel"];const d=function(){const e=(0,i.Zp)(),[a,s]=(0,l.useState)([]),[d,m]=(0,l.useState)(!0),[u,p]=(0,l.useState)(!1),[h,g]=(0,l.useState)(null),[x,j]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[N,b]=(0,l.useState)(window.innerWidth<=1024),[y,k]=(0,l.useState)(0),[A,w]=(0,l.useState)("all"),[I,C]=(0,l.useState)(""),[_,S]=(0,l.useState)({name:"",description:"",short_description:"",category:"",subcategory:"",type:"calibration_block",price:"",compare_price:"",cost_price:"",stock_quantity:"10",sku:"",dimensions:"",tolerance:"",flaws:"",weight:"",standards:"",materials:[],customMaterial:"",specifications:{},features:{},images:[],mainImageIndex:0,meta_title:"",meta_description:"",meta_keywords:"",is_featured:!1}),[F,M]=(0,l.useState)({id:null,name:"",description:"",short_description:"",category:"",subcategory:"",type:"calibration_block",price:"",compare_price:"",cost_price:"",stock_quantity:"10",sku:"",dimensions:"",tolerance:"",flaws:"",weight:"",standards:"",materials:[],customMaterial:"",specifications:{},features:{},existingImages:[],deleteImages:[],newImages:[],mainImageIndex:null,mainImageId:null,meta_title:"",meta_description:"",meta_keywords:"",is_featured:!1}),[E,P]=(0,l.useState)([{key:"",value:""}]),[T,D]=(0,l.useState)([{key:"",value:""}]),[O,B]=(0,l.useState)([{key:"",value:""}]),[U,L]=(0,l.useState)([{key:"",value:""}]),[R,q]=(0,l.useState)(!1),[K,V]=(0,l.useState)(!1),[z,W]=(0,l.useState)([]),[H,J]=(0,l.useState)({existing:[],new:[]}),[Y,$]=(0,l.useState)("basic"),[Z,Q]=(0,l.useState)("basic");(0,l.useEffect)(()=>{const e=()=>{const e=window.innerWidth<=1024;b(a=>a!==e?e:a)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const G=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?m(!0):p(!0);const a=localStorage.getItem("admin_token"),t=await fetch("".concat(c.H$,"/api/products?limit=1000"),{headers:{Authorization:"Bearer ".concat(a)}}),l=await t.json();l.success?s(l.products||[]):console.error("Failed to fetch products:",l.message)}catch(a){console.error("Error fetching products:",a)}finally{m(!1),p(!1)}},[]);(0,l.useEffect)(()=>{G(!0)},[G]);const X=(0,l.useMemo)(()=>({total:a.length,calibrationBlocks:a.filter(e=>"calibration_block"===e.type).length,flawedSpecimens:a.filter(e=>"flawed_specimen"===e.type).length,validationBlocks:a.filter(e=>"validation_block"===e.type).length}),[a]),ee=e=>{var a;return(null===(a=r[e])||void 0===a?void 0:a.categories)||[]},ae=function(e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;M(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,t.A)((0,t.A)({},F),{},{mainImageId:null,mainImageIndex:a}):(0,t.A)((0,t.A)({},F),{},{mainImageId:e,mainImageIndex:null}))},se=()=>{_.customMaterial.trim()&&!_.materials.includes(_.customMaterial.trim())&&S((0,t.A)((0,t.A)({},_),{},{materials:[..._.materials,_.customMaterial.trim()],customMaterial:""}))},te=()=>{F.customMaterial.trim()&&!F.materials.includes(F.customMaterial.trim())&&M((0,t.A)((0,t.A)({},F),{},{materials:[...F.materials,F.customMaterial.trim()],customMaterial:""}))},le=(e,a,s)=>{const l=[...E];l[e][a]=s,P(l);const i={};l.forEach(e=>{e.key&&e.value&&(i[e.key]=e.value)}),S((0,t.A)((0,t.A)({},_),{},{specifications:i}))},ie=(e,a,s)=>{const l=[...T];l[e][a]=s,D(l);const i={};l.forEach(e=>{e.key&&e.value&&(i[e.key]=e.value)}),M((0,t.A)((0,t.A)({},F),{},{specifications:i}))},ce=(e,a,s)=>{const l=[...O];l[e][a]=s,B(l);const i={};l.forEach(e=>{e.key&&e.value&&(i[e.key]=e.value)}),S((0,t.A)((0,t.A)({},_),{},{features:i}))},ne=(e,a,s)=>{const l=[...U];l[e][a]=s,L(l);const i={};l.forEach(e=>{e.key&&e.value&&(i[e.key]=e.value)}),M((0,t.A)((0,t.A)({},F),{},{features:i}))};(0,l.useEffect)(()=>{if(_.specifications&&Object.keys(_.specifications).length>0){const e=Object.entries(_.specifications).map(e=>{let[a,s]=e;return{key:a,value:s}});e.length>0&&P(e)}if(_.features&&Object.keys(_.features).length>0){const e=Object.entries(_.features).map(e=>{let[a,s]=e;return{key:a,value:s}});e.length>0&&B(e)}},[]),(0,l.useEffect)(()=>{if(F.id){if(F.specifications&&Object.keys(F.specifications).length>0){const e=Object.entries(F.specifications).map(e=>{let[a,s]=e;return{key:a,value:s}});D(e)}else D([{key:"",value:""}]);if(F.features&&Object.keys(F.features).length>0){const e=Object.entries(F.features).map(e=>{let[a,s]=e;return{key:a,value:s}});L(e)}else L([{key:"",value:""}])}},[F.id,F.specifications,F.features]);const re=async e=>{if(e.preventDefault(),V(!0),!F.name||!F.category||!F.type)return alert("Please fill all required fields (name, category, and type)!"),void V(!1);try{const e=localStorage.getItem("admin_token"),a=new FormData;Object.entries(F).forEach(e=>{let[s,t]=e;"newImages"!==s&&"existingImages"!==s&&"customMaterial"!==s&&"deleteImages"!==s&&"mainImageIndex"!==s&&"mainImageId"!==s&&"specifications"!==s&&"features"!==s&&"materials"!==s&&a.append(s,t)}),a.append("specifications",JSON.stringify(F.specifications||{})),a.append("features",JSON.stringify(F.features||{})),a.append("materials",JSON.stringify(F.materials||[])),F.deleteImages.length>0&&a.append("deleteImages",JSON.stringify(F.deleteImages)),null!==F.mainImageId?a.append("mainImageId",F.mainImageId):null!==F.mainImageIndex&&a.append("mainImageIndex",F.mainImageIndex),F.newImages&&F.newImages.length>0&&F.newImages.forEach(e=>{a.append("images",e)}),console.log("Updating product ".concat(F.id));const s=await fetch("".concat(c.H$,"/api/products/").concat(F.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e)},body:a}),t=await s.json();t.success?(alert("Product updated successfully!"),j(!1),v(!1),G(!1)):alert("Error: ".concat(t.message||"Failed to update product"))}catch(a){console.error("Network error:",a),alert("Failed to update product. Check your connection and try again.")}finally{V(!1)}},oe=()=>{S({name:"",description:"",short_description:"",category:"",subcategory:"",type:"calibration_block",price:"",compare_price:"",cost_price:"",stock_quantity:"10",sku:"",dimensions:"",tolerance:"",flaws:"",weight:"",standards:"",materials:[],customMaterial:"",specifications:{},features:{},images:[],mainImageIndex:0,meta_title:"",meta_description:"",meta_keywords:"",is_featured:!1}),W([]),P([{key:"",value:""}]),B([{key:"",value:""}]),$("basic");const e=document.querySelector('input[type="file"]');e&&(e.value="")},de=async e=>{if(window.confirm("Are you sure you want to delete this product? This action cannot be undone."))try{const a=localStorage.getItem("admin_token"),s=await fetch("".concat(c.H$,"/api/products/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(a)}}),t=await s.json();t.success?(alert("Product deleted successfully!"),j(!1),G(!1)):alert("Error: ".concat(t.message||"Failed to delete product"))}catch(a){console.error("Delete error:",a),alert("Failed to delete product. Please try again.")}},me=async e=>{try{const a=localStorage.getItem("admin_token"),s=await fetch("".concat(c.H$,"/api/products/").concat(e),{headers:{Authorization:"Bearer ".concat(a)}}),t=await s.json();if(t.success){k(0);const e=t.product;g(e);const a=e.images.find(e=>e.isMain),s=a?a.id:e.images.length>0?e.images[0].id:null;M({id:e.id,name:e.name||"",description:e.description||"",short_description:e.short_description||"",category:e.category||"",subcategory:e.subcategory||"",type:e.type||"calibration_block",price:e.price||"",compare_price:e.compare_price||"",cost_price:e.cost_price||"",stock_quantity:e.stock_quantity||"0",sku:e.sku||"",dimensions:e.dimensions||"",tolerance:e.tolerance||"",flaws:e.flaws||"",weight:e.weight||"",standards:e.standards||"",materials:Array.isArray(e.materials)?e.materials:[],customMaterial:"",specifications:e.specifications||{},features:e.features||{},existingImages:e.images||[],deleteImages:[],newImages:[],mainImageId:s,mainImageIndex:null,meta_title:e.meta_title||"",meta_description:e.meta_description||"",meta_keywords:e.meta_keywords||"",is_featured:e.is_featured||!1});const l=e.specifications||{};Object.keys(l).length>0?D(Object.entries(l).map(e=>{let[a,s]=e;return{key:a,value:s}})):D([{key:"",value:""}]);const i=e.features||{};Object.keys(i).length>0?L(Object.entries(i).map(e=>{let[a,s]=e;return{key:a,value:s}})):L([{key:"",value:""}]),J({existing:e.images||[],new:[]}),j(!0),v(!1),Q("basic")}else alert("Failed to load product details.")}catch(a){console.error("Error fetching product:",a),alert("Failed to load product details. Please try again.")}},ue=()=>{(F.newImages.length>0||F.deleteImages.length>0)&&!window.confirm("You have unsaved changes. Are you sure you want to discard them?")||(H.new.forEach(e=>{e.url.startsWith("blob:")&&URL.revokeObjectURL(e.url)}),v(!1),me(F.id))},pe=(0,l.useMemo)(()=>I||"all"!==A?a.filter(e=>{if("all"!==A&&e.type!==A)return!1;if(I){var a;const s=I.toLowerCase();return e.name.toLowerCase().includes(s)||(null===(a=e.description)||void 0===a?void 0:a.toLowerCase().includes(s))||e.category.toLowerCase().includes(s)}return!0}):a,[a,I,A]),he=e=>e?"\u20b9".concat(parseFloat(e).toFixed(2)):"\u20b90.00",ge=e=>{if(!e)return"/placeholder-image.png";let a=e;if("object"===typeof a&&null!==a&&(a=a.url||a.path),!a||"string"!==typeof a)return"/placeholder-image.png";if(a.startsWith("http")||a.startsWith("blob:"))return a;const s=a.startsWith("/")?a:"/".concat(a);return"".concat(c.H$).concat(s)},xe=e=>{e.target.src.includes("placeholder-image.png")||(e.target.src="/placeholder-image.png")};return(0,n.jsxs)("div",{className:"admin-dashboard",children:[(0,n.jsxs)("div",{className:"dashboard-header",children:[(0,n.jsxs)("div",{className:"header-left",children:[(0,n.jsxs)("h1",{children:[(0,n.jsx)("i",{className:"fas fa-toolbox"})," DAKS NDT Admin"]}),(0,n.jsx)("p",{children:"Manage your NDT products catalog"})]}),(0,n.jsxs)("div",{className:"header-right",children:[(0,n.jsxs)("button",{onClick:()=>G(!0),className:"refresh-button",disabled:d||u,children:[(0,n.jsxs)("button",{onClick:()=>e("/admin/orders"),className:"refresh-button",style:{marginRight:"10px",backgroundColor:"#fafafa"},children:[(0,n.jsx)("i",{className:"fas fa-shopping-cart"})," Manage Orders"]}),(0,n.jsx)("i",{className:"fas fa-sync-alt ".concat(u?"fa-spin":"")})," Refresh Products"]}),(0,n.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to log out?")&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_data"),e("/admin/login"))},className:"logout-button",children:[(0,n.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})]})]}),(0,n.jsxs)("div",{className:"dashboard-stats",children:[(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon",children:(0,n.jsx)("i",{className:"fas fa-box"})}),(0,n.jsxs)("div",{className:"stat-content",children:[(0,n.jsx)("h3",{children:X.total}),(0,n.jsx)("p",{children:"Total Products"})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon blue",children:(0,n.jsx)("i",{className:"fas fa-ruler"})}),(0,n.jsxs)("div",{className:"stat-content",children:[(0,n.jsx)("h3",{children:X.calibrationBlocks}),(0,n.jsx)("p",{children:"Calibration Blocks"})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon purple",children:(0,n.jsx)("i",{className:"fas fa-flask"})}),(0,n.jsxs)("div",{className:"stat-content",children:[(0,n.jsx)("h3",{children:X.flawedSpecimens}),(0,n.jsx)("p",{children:"Flawed Specimens"})]})]}),(0,n.jsxs)("div",{className:"stat-card",children:[(0,n.jsx)("div",{className:"stat-icon green",children:(0,n.jsx)("i",{className:"fas fa-check-circle"})}),(0,n.jsxs)("div",{className:"stat-content",children:[(0,n.jsx)("h3",{children:X.validationBlocks}),(0,n.jsx)("p",{children:"Validation Blocks"})]})]})]}),(0,n.jsxs)("div",{className:"dashboard-content",children:[(0,n.jsxs)("div",{className:"product-form-container",children:[(0,n.jsxs)("h2",{children:[(0,n.jsx)("i",{className:"fas fa-plus-circle"})," Add New Product"]}),(0,n.jsxs)("div",{className:"admin-nav-buttons",children:[(0,n.jsxs)("button",{onClick:()=>e("/admin/orders"),className:"nav-buttons orders",children:[(0,n.jsx)("i",{className:"fas fa-shopping-cart"})," Orders"]})," ",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>e("/admin/sort-products"),className:"nav-buttons sort",children:[(0,n.jsx)("i",{className:"fas fa-sort-amount-down"})," Sort Products"]})," ",(0,n.jsx)("br",{}),(0,n.jsxs)("button",{onClick:()=>e("/admin/gallery"),className:"nav-buttons gallery",children:[(0,n.jsx)("i",{className:"fas fa-images"})," Gallery"]})]}),(0,n.jsxs)("div",{className:"form-tabs",children:[(0,n.jsxs)("button",{type:"button",className:"basic"===Y?"tab-active":"",onClick:()=>$("basic"),children:[(0,n.jsx)("i",{className:"fas fa-info-circle"})," Basic Info"]}),(0,n.jsxs)("button",{type:"button",className:"technical"===Y?"tab-active":"",onClick:()=>$("technical"),children:[(0,n.jsx)("i",{className:"fas fa-cogs"})," Technical"]}),(0,n.jsxs)("button",{type:"button",className:"meta"===Y?"tab-active":"",onClick:()=>$("meta"),children:[(0,n.jsx)("i",{className:"fas fa-tags"})," Meta Data"]}),(0,n.jsxs)("button",{type:"button",className:"images"===Y?"tab-active":"",onClick:()=>$("images"),children:[(0,n.jsx)("i",{className:"fas fa-images"})," Images (",z.length,")"]})]}),(0,n.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),q(!0),!_.name||!_.category||!_.type)return alert("Please fill all required fields (name, category, and type)!"),void q(!1);try{var a;const e=localStorage.getItem("admin_token"),s=new FormData;s.append("name",_.name),s.append("description",_.description||""),s.append("short_description",_.short_description||""),s.append("category",_.category),s.append("subcategory",_.subcategory||""),s.append("type",_.type),s.append("price",_.price||"0"),s.append("compare_price",_.compare_price||""),s.append("cost_price",_.cost_price||""),s.append("stock_quantity",_.stock_quantity||"10"),s.append("sku",_.sku||""),s.append("dimensions",_.dimensions||""),s.append("tolerance",_.tolerance||""),s.append("flaws",_.flaws||""),s.append("weight",_.weight||""),s.append("standards",_.standards||""),s.append("meta_title",_.meta_title||""),s.append("meta_description",_.meta_description||""),s.append("meta_keywords",_.meta_keywords||""),s.append("is_featured",_.is_featured),s.append("materials",JSON.stringify(_.materials||[])),s.append("specifications",JSON.stringify(_.specifications||{})),s.append("features",JSON.stringify(_.features||{})),s.append("mainImageIndex",_.mainImageIndex),_.images&&_.images.length>0&&_.images.forEach(e=>{s.append("images",e)}),console.log("\ud83d\udce4 Sending product data to backend..."),console.log("Product name:",_.name),console.log("Price:",_.price),console.log("Images:",(null===(a=_.images)||void 0===a?void 0:a.length)||0);const t=await fetch("".concat(c.H$,"/api/products"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),l=await t.json();console.log("\ud83d\udce5 Backend response:",l),l.success?(alert("Product added successfully!"),oe(),G(!1)):alert("Error: ".concat(l.message||"Failed to add product"))}catch(s){console.error("Network error:",s),alert("Failed to add product. Check your connection and try again.")}finally{q(!1)}},className:"product-form",children:[(0,n.jsxs)("div",{className:"tab-content",children:["basic"===Y&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Name *"}),(0,n.jsx)("input",{type:"text",value:_.name,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{name:e.target.value})),required:!0,placeholder:"e.g., ASME V Calibration Block",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"SKU"}),(0,n.jsx)("input",{type:"text",value:_.sku,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{sku:e.target.value})),placeholder:"e.g., CB-ASME-001 (generated if empty)",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Type *"}),(0,n.jsxs)("select",{value:_.type,onChange:e=>{const a=e.target.value;S((0,t.A)((0,t.A)({},_),{},{type:a,category:""}))},className:"form-control",children:[(0,n.jsx)("option",{value:"calibration_block",children:"Calibration Block"}),(0,n.jsx)("option",{value:"flawed_specimen",children:"Flawed Specimen"}),(0,n.jsx)("option",{value:"validation_block",children:"Validation Block"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Category *"}),(0,n.jsxs)("select",{value:_.category,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{category:e.target.value})),required:!0,className:"form-control",children:[(0,n.jsx)("option",{value:"",children:"Select category"}),ee(_.type).map((e,a)=>(0,n.jsx)("option",{value:e,children:e},a))]})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Subcategory"}),(0,n.jsx)("input",{type:"text",value:_.subcategory,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{subcategory:e.target.value})),placeholder:"e.g., ASME V Standards",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Featured Product"}),(0,n.jsxs)("div",{className:"toggle-container",children:[(0,n.jsxs)("label",{className:"toggle",children:[(0,n.jsx)("input",{type:"checkbox",checked:_.is_featured,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{is_featured:e.target.checked}))}),(0,n.jsx)("span",{className:"toggle-slider"})]}),(0,n.jsx)("span",{className:"toggle-label",children:_.is_featured?"Yes":"No"})]})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Short Description"}),(0,n.jsx)("input",{type:"text",value:_.short_description,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{short_description:e.target.value})),placeholder:"Brief description (shown in product lists)",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Full Description *"}),(0,n.jsx)("textarea",{value:_.description,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{description:e.target.value})),placeholder:"Detailed product description...",rows:"5",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:_.price,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Compare At Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:_.compare_price,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{compare_price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Cost Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:_.cost_price,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{cost_price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Stock Quantity"}),(0,n.jsx)("input",{type:"number",value:_.stock_quantity,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{stock_quantity:e.target.value})),placeholder:"0",min:"0",step:"1",className:"form-control"})]})]})]}),"technical"===Y&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Dimensions"}),(0,n.jsx)("input",{type:"text",value:_.dimensions,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{dimensions:e.target.value})),placeholder:"e.g., 100mm x 50mm x 25mm",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Weight"}),(0,n.jsx)("input",{type:"text",value:_.weight,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{weight:e.target.value})),placeholder:"e.g., 1.5kg",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Tolerance"}),(0,n.jsx)("input",{type:"text",value:_.tolerance,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{tolerance:e.target.value})),placeholder:"e.g., \xb10.02mm or \xb10.001 inch",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Standards"}),(0,n.jsx)("input",{type:"text",value:_.standards,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{standards:e.target.value})),placeholder:"e.g., ASME V, EN 12668",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Flaws/Defects"}),(0,n.jsx)("textarea",{value:_.flaws,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{flaws:e.target.value})),placeholder:"e.g., Side drilled holes: 1.5mm, 3mm, 6mm diameter...",rows:"3",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Materials"}),_.materials.length>0&&(0,n.jsxs)("div",{className:"selected-materials",children:[(0,n.jsxs)("div",{className:"selected-materials-header",children:["Selected Materials (",_.materials.length,"):"]}),(0,n.jsx)("div",{className:"selected-materials-list",children:_.materials.map((e,a)=>(0,n.jsxs)("div",{className:"material-tag selected",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{S((0,t.A)((0,t.A)({},_),{},{materials:_.materials.filter(a=>a!==e)}))})(e),className:"remove-material",children:"\xd7"})]},a))})]}),(0,n.jsx)("div",{className:"materials-selection",children:o.map((e,a)=>(0,n.jsx)("div",{onClick:()=>(e=>{const a=[..._.materials],s=a.indexOf(e);-1===s?a.push(e):a.splice(s,1),S((0,t.A)((0,t.A)({},_),{},{materials:a}))})(e),className:"material-tag ".concat(_.materials.includes(e)?"active":""),children:e},a))}),(0,n.jsxs)("div",{className:"custom-material-input",children:[(0,n.jsx)("input",{type:"text",value:_.customMaterial,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{customMaterial:e.target.value})),placeholder:"Add custom material...",className:"form-control",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),se())}),(0,n.jsx)("button",{type:"button",onClick:se,className:"add-material-btn",children:"Add Material"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Specifications"}),(0,n.jsx)("div",{className:"specs-list",children:E.map((e,a)=>(0,n.jsxs)("div",{className:"spec-row",children:[(0,n.jsx)("input",{type:"text",placeholder:"Name",value:e.key,onChange:e=>le(a,"key",e.target.value),className:"form-control spec-key"}),(0,n.jsx)("input",{type:"text",placeholder:"Value",value:e.value,onChange:e=>le(a,"value",e.target.value),className:"form-control spec-value"}),(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{const a=[...E];a.splice(e,1),P(a);const s={};a.forEach(e=>{e.key&&e.value&&(s[e.key]=e.value)}),S((0,t.A)((0,t.A)({},_),{},{specifications:s}))})(a),className:"remove-spec-btn",children:"\xd7"})]},a))}),(0,n.jsx)("button",{type:"button",onClick:()=>{P([...E,{key:"",value:""}])},className:"add-spec-btn",children:"+ Add Specification"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Features"}),(0,n.jsx)("div",{className:"features-list",children:O.map((e,a)=>(0,n.jsxs)("div",{className:"feature-row",children:[(0,n.jsx)("input",{type:"text",placeholder:"Name",value:e.key,onChange:e=>ce(a,"key",e.target.value),className:"form-control feature-key"}),(0,n.jsx)("input",{type:"text",placeholder:"Description",value:e.value,onChange:e=>ce(a,"value",e.target.value),className:"form-control feature-value"}),(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{const a=[...O];a.splice(e,1),B(a);const s={};a.forEach(e=>{e.key&&e.value&&(s[e.key]=e.value)}),S((0,t.A)((0,t.A)({},_),{},{features:s}))})(a),className:"remove-feature-btn",children:"\xd7"})]},a))}),(0,n.jsx)("button",{type:"button",onClick:()=>{B([...O,{key:"",value:""}])},className:"add-feature-btn",children:"+ Add Feature"})]})]}),"meta"===Y&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Title (SEO)"}),(0,n.jsx)("input",{type:"text",value:_.meta_title,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{meta_title:e.target.value})),placeholder:"Optimized title for search engines",className:"form-control"}),(0,n.jsx)("small",{children:"Leave empty to use product name"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Description"}),(0,n.jsx)("textarea",{value:_.meta_description,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{meta_description:e.target.value})),placeholder:"Brief description for search engine results",rows:"3",className:"form-control"}),(0,n.jsx)("small",{children:"Recommended length: 150-160 characters"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Keywords"}),(0,n.jsx)("input",{type:"text",value:_.meta_keywords,onChange:e=>S((0,t.A)((0,t.A)({},_),{},{meta_keywords:e.target.value})),placeholder:"e.g., calibration block, ultrasonic testing, ASME",className:"form-control"}),(0,n.jsx)("small",{children:"Comma-separated keywords"})]})]}),"images"===Y&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Images (Max 10)"}),(0,n.jsxs)("div",{className:"file-upload",children:[(0,n.jsx)("input",{type:"file",onChange:e=>{const a=Array.from(e.target.files);if(a.length>10)return void alert("Maximum 10 images allowed");S((0,t.A)((0,t.A)({},_),{},{images:a}));const s=a.map(e=>({url:URL.createObjectURL(e),name:e.name}));W(s)},multiple:!0,accept:"image/*",id:"productImages",className:"file-input"}),(0,n.jsxs)("label",{htmlFor:"productImages",className:"file-label",children:[(0,n.jsx)("i",{className:"fas fa-cloud-upload-alt"})," Choose Files"]}),(0,n.jsxs)("span",{className:"file-info",children:[_.images.length," file(s) selected"]})]}),(0,n.jsx)("small",{children:"First image will be the main product image by default."})]}),z.length>0?(0,n.jsx)("div",{className:"image-preview-container",children:z.map((e,a)=>(0,n.jsxs)("div",{className:"image-preview ".concat(a===_.mainImageIndex?"main-image":""),onClick:()=>{return e=a,void S((0,t.A)((0,t.A)({},_),{},{mainImageIndex:e}));var e},children:[(0,n.jsx)("img",{src:e.url,alt:e.name,className:"preview-img"}),a===_.mainImageIndex&&(0,n.jsx)("div",{className:"main-badge",children:"MAIN"}),(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{const a=[..._.images];a.splice(e,1);const s=[...z];URL.revokeObjectURL(s[e].url),s.splice(e,1);let l=_.mainImageIndex;e===_.mainImageIndex?l=0:e<_.mainImageIndex&&(l=_.mainImageIndex-1),S((0,t.A)((0,t.A)({},_),{},{images:a,mainImageIndex:l})),W(s)})(a)},className:"remove-image-btn",children:"\xd7"}),(0,n.jsx)("div",{className:"image-name",children:e.name})]},a))}):(0,n.jsxs)("div",{className:"no-images",children:[(0,n.jsx)("i",{className:"fas fa-images"}),(0,n.jsx)("p",{children:"No images selected"}),(0,n.jsx)("span",{children:"Click above to add product images"})]})]})]}),(0,n.jsxs)("div",{className:"form-actions",children:[(0,n.jsxs)("button",{type:"button",onClick:oe,className:"reset-button",children:[(0,n.jsx)("i",{className:"fas fa-undo"})," Reset Form"]}),(0,n.jsx)("button",{type:"submit",disabled:R,className:"submit-button",children:R?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-spinner fa-spin"})," Adding Product..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-plus-circle"})," Add Product"]})})]})]})]}),(0,n.jsxs)("div",{className:"products-list-container",children:[(0,n.jsxs)("div",{className:"products-header",children:[(0,n.jsxs)("h2",{children:[(0,n.jsx)("i",{className:"fas fa-boxes"})," Products (",pe.length,")"]}),(0,n.jsxs)("div",{className:"product-filters",children:[(0,n.jsxs)("div",{className:"search-container",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search products...",value:I,onChange:e=>C(e.target.value),className:"search-input"}),(0,n.jsx)("i",{className:"fas fa-search search-icon"})]}),(0,n.jsxs)("select",{value:A,onChange:e=>w(e.target.value),className:"type-filter",children:[(0,n.jsx)("option",{value:"all",children:"All Types"}),(0,n.jsx)("option",{value:"calibration_block",children:"Calibration Blocks"}),(0,n.jsx)("option",{value:"flawed_specimen",children:"Flawed Specimens"}),(0,n.jsx)("option",{value:"validation_block",children:"Validation Blocks"})]})]})]}),d?(0,n.jsxs)("div",{className:"loading-container",children:[(0,n.jsx)("div",{className:"spinner"}),(0,n.jsx)("p",{children:"Loading products..."})]}):(0,n.jsxs)("div",{className:"products-grid-wrapper",style:{position:"relative",minHeight:"300px"},children:[u&&(0,n.jsx)("div",{className:"refresh-overlay",children:(0,n.jsx)("div",{className:"refresh-spinner"})}),0===pe.length?(0,n.jsxs)("div",{className:"no-products",children:[(0,n.jsx)("i",{className:"fas fa-box-open"}),(0,n.jsx)("p",{children:"No products found"})]}):(0,n.jsx)("div",{className:"products-grid",style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:pe.map(e=>{var a;return(0,n.jsxs)("div",{className:"product-card",children:[(0,n.jsxs)("div",{className:"product-image",children:[(0,n.jsx)("img",{src:ge(e.mainImage||e.image_url),alt:e.name,loading:"lazy",onError:xe}),(0,n.jsx)("div",{className:"product-type-badge","data-type":e.type,children:e.type.replace("_"," ")})]}),(0,n.jsxs)("div",{className:"product-info",children:[(0,n.jsx)("h3",{className:"product-name",children:e.name}),(0,n.jsx)("div",{className:"product-category",children:e.category}),(0,n.jsx)("p",{className:"product-description",children:e.short_description||((null===(a=e.description)||void 0===a?void 0:a.length)>60?e.description.substring(0,60)+"...":e.description)}),(0,n.jsxs)("div",{className:"product-footer",children:[(0,n.jsx)("div",{className:"product-price",children:he(e.price)}),(0,n.jsxs)("div",{className:"product-actions",children:[(0,n.jsxs)("button",{onClick:()=>me(e.id),className:"view-button",children:["EDIT",(0,n.jsx)("i",{className:"fas fa-eye"})]}),(0,n.jsxs)("button",{onClick:()=>de(e.id),className:"delete-button",children:["DELETE",(0,n.jsx)("i",{className:"fas fa-trash-alt"})]})]})]})]})]},e.id)})})]})]})]}),x&&h&&(0,n.jsx)("div",{className:"modal-overlay",onClick:()=>{f&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||(j(!1),v(!1))},children:(0,n.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"modal-header",children:[(0,n.jsx)("h3",{children:f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-edit"})," Edit Product"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-box-open"})," Product Details"]})}),(0,n.jsx)("button",{className:"close-button",onClick:()=>{f&&!window.confirm("You have unsaved changes. Are you sure you want to close?")||(j(!1),v(!1))},children:(0,n.jsx)("i",{className:"fas fa-times"})})]}),f&&(0,n.jsxs)("div",{className:"edit-mode-notice",children:[(0,n.jsx)("i",{className:"fas fa-edit"})," You are editing this product"]}),(0,n.jsx)("div",{className:"modal-body",children:f?(0,n.jsxs)("form",{onSubmit:re,children:[(0,n.jsxs)("div",{className:"form-tabs",children:[(0,n.jsxs)("button",{type:"button",className:"basic"===Z?"tab-active":"",onClick:()=>Q("basic"),children:[(0,n.jsx)("i",{className:"fas fa-info-circle"})," Basic Info"]}),(0,n.jsxs)("button",{type:"button",className:"technical"===Z?"tab-active":"",onClick:()=>Q("technical"),children:[(0,n.jsx)("i",{className:"fas fa-cogs"})," Technical"]}),(0,n.jsxs)("button",{type:"button",className:"meta"===Z?"tab-active":"",onClick:()=>Q("meta"),children:[(0,n.jsx)("i",{className:"fas fa-tags"})," Meta Data"]}),(0,n.jsxs)("button",{type:"button",className:"images"===Z?"tab-active":"",onClick:()=>Q("images"),children:[(0,n.jsx)("i",{className:"fas fa-images"})," Images (",F.existingImages.length-F.deleteImages.length+F.newImages.length,")"]})]}),(0,n.jsxs)("div",{className:"tab-content",children:["basic"===Z&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Name *"}),(0,n.jsx)("input",{type:"text",value:F.name,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{name:e.target.value})),required:!0,placeholder:"e.g., ASME V Calibration Block",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"SKU"}),(0,n.jsx)("input",{type:"text",value:F.sku,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{sku:e.target.value})),placeholder:"e.g., CB-ASME-001",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Product Type *"}),(0,n.jsxs)("select",{value:F.type,onChange:e=>{const a=e.target.value;M((0,t.A)((0,t.A)({},F),{},{type:a,category:""}))},className:"form-control",children:[(0,n.jsx)("option",{value:"calibration_block",children:"Calibration Block"}),(0,n.jsx)("option",{value:"flawed_specimen",children:"Flawed Specimen"}),(0,n.jsx)("option",{value:"validation_block",children:"Validation Block"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Category *"}),(0,n.jsxs)("select",{value:F.category,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{category:e.target.value})),required:!0,className:"form-control",children:[(0,n.jsx)("option",{value:"",children:"Select category"}),ee(F.type).map((e,a)=>(0,n.jsx)("option",{value:e,children:e},a))]})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Subcategory"}),(0,n.jsx)("input",{type:"text",value:F.subcategory,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{subcategory:e.target.value})),placeholder:"e.g., ASME V Standards",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Featured Product"}),(0,n.jsxs)("div",{className:"toggle-container",children:[(0,n.jsxs)("label",{className:"toggle",children:[(0,n.jsx)("input",{type:"checkbox",checked:F.is_featured,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{is_featured:e.target.checked}))}),(0,n.jsx)("span",{className:"toggle-slider"})]}),(0,n.jsx)("span",{className:"toggle-label",children:F.is_featured?"Yes":"No"})]})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Short Description"}),(0,n.jsx)("input",{type:"text",value:F.short_description,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{short_description:e.target.value})),placeholder:"Brief description (shown in product lists)",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Full Description *"}),(0,n.jsx)("textarea",{value:F.description,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{description:e.target.value})),placeholder:"Detailed product description...",rows:"5",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:F.price,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Compare At Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:F.compare_price,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{compare_price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Cost Price (\u20b9)"}),(0,n.jsx)("input",{type:"number",value:F.cost_price,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{cost_price:e.target.value})),placeholder:"0.00",min:"0",step:"0.01",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Stock Quantity"}),(0,n.jsx)("input",{type:"number",value:F.stock_quantity,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{stock_quantity:e.target.value})),placeholder:"0",min:"0",step:"1",className:"form-control"})]})]})]}),"technical"===Z&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-row",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Dimensions"}),(0,n.jsx)("input",{type:"text",value:F.dimensions,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{dimensions:e.target.value})),placeholder:"e.g., 100mm x 50mm x 25mm",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Weight"}),(0,n.jsx)("input",{type:"text",value:F.weight,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{weight:e.target.value})),placeholder:"e.g., 1.5kg",className:"form-control"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Tolerance"}),(0,n.jsx)("input",{type:"text",value:F.tolerance,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{tolerance:e.target.value})),placeholder:"e.g., \xb10.02mm or \xb10.001 inch",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Standards"}),(0,n.jsx)("input",{type:"text",value:F.standards,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{standards:e.target.value})),placeholder:"e.g., ASME V, EN 12668",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Flaws/Defects"}),(0,n.jsx)("textarea",{value:F.flaws,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{flaws:e.target.value})),placeholder:"e.g., Side drilled holes: 1.5mm, 3mm, 6mm diameter...",rows:"3",className:"form-control"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Materials"}),F.materials.length>0&&(0,n.jsxs)("div",{className:"selected-materials",children:[(0,n.jsxs)("div",{className:"selected-materials-header",children:["Selected Materials (",F.materials.length,"):"]}),(0,n.jsx)("div",{className:"selected-materials-list",children:F.materials.map((e,a)=>(0,n.jsxs)("div",{className:"material-tag selected",children:[e,(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{M((0,t.A)((0,t.A)({},F),{},{materials:F.materials.filter(a=>a!==e)}))})(e),className:"remove-material",children:"\xd7"})]},a))})]}),(0,n.jsx)("div",{className:"materials-selection",children:o.map((e,a)=>(0,n.jsx)("div",{onClick:()=>(e=>{const a=[...F.materials],s=a.indexOf(e);-1===s?a.push(e):a.splice(s,1),M((0,t.A)((0,t.A)({},F),{},{materials:a}))})(e),className:"material-tag ".concat(F.materials.includes(e)?"active":""),children:e},a))}),(0,n.jsxs)("div",{className:"custom-material-input",children:[(0,n.jsx)("input",{type:"text",value:F.customMaterial,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{customMaterial:e.target.value})),placeholder:"Add custom material...",className:"form-control",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),te())}),(0,n.jsx)("button",{type:"button",onClick:te,className:"add-material-btn",children:"Add Material"})]})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Specifications"}),(0,n.jsx)("div",{className:"specs-list",children:T.map((e,a)=>(0,n.jsxs)("div",{className:"spec-row",children:[(0,n.jsx)("input",{type:"text",placeholder:"Name",value:e.key,onChange:e=>ie(a,"key",e.target.value),className:"form-control spec-key"}),(0,n.jsx)("input",{type:"text",placeholder:"Value",value:e.value,onChange:e=>ie(a,"value",e.target.value),className:"form-control spec-value"}),(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{const a=[...T];a.splice(e,1),D(a);const s={};a.forEach(e=>{e.key&&e.value&&(s[e.key]=e.value)}),M((0,t.A)((0,t.A)({},F),{},{specifications:s}))})(a),className:"remove-spec-btn",children:"\xd7"})]},a))}),(0,n.jsx)("button",{type:"button",onClick:()=>{D([...T,{key:"",value:""}])},className:"add-spec-btn",children:"+ Add Specification"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Features"}),(0,n.jsx)("div",{className:"features-list",children:U.map((e,a)=>(0,n.jsxs)("div",{className:"feature-row",children:[(0,n.jsx)("input",{type:"text",placeholder:"Name",value:e.key,onChange:e=>ne(a,"key",e.target.value),className:"form-control feature-key"}),(0,n.jsx)("input",{type:"text",placeholder:"Description",value:e.value,onChange:e=>ne(a,"value",e.target.value),className:"form-control feature-value"}),(0,n.jsx)("button",{type:"button",onClick:()=>(e=>{const a=[...U];a.splice(e,1),L(a);const s={};a.forEach(e=>{e.key&&e.value&&(s[e.key]=e.value)}),M((0,t.A)((0,t.A)({},F),{},{features:s}))})(a),className:"remove-feature-btn",children:"\xd7"})]},a))}),(0,n.jsx)("button",{type:"button",onClick:()=>{L([...U,{key:"",value:""}])},className:"add-feature-btn",children:"+ Add Feature"})]})]}),"meta"===Z&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Title (SEO)"}),(0,n.jsx)("input",{type:"text",value:F.meta_title,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{meta_title:e.target.value})),placeholder:"Optimized title for search engines",className:"form-control"}),(0,n.jsx)("small",{children:"Leave empty to use product name"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Description"}),(0,n.jsx)("textarea",{value:F.meta_description,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{meta_description:e.target.value})),placeholder:"Brief description for search engine results",rows:"3",className:"form-control"}),(0,n.jsx)("small",{children:"Recommended length: 150-160 characters"})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{children:"Meta Keywords"}),(0,n.jsx)("input",{type:"text",value:F.meta_keywords,onChange:e=>M((0,t.A)((0,t.A)({},F),{},{meta_keywords:e.target.value})),placeholder:"e.g., calibration block, ultrasonic testing, ASME",className:"form-control"}),(0,n.jsx)("small",{children:"Comma-separated keywords"})]})]}),"images"===Z&&(0,n.jsxs)("div",{className:"form-section",children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{children:["Product Images (Current: ",F.existingImages.length-F.deleteImages.length,", New: ",F.newImages.length,", Max: 10)"]}),(0,n.jsxs)("div",{className:"file-upload",children:[(0,n.jsx)("input",{type:"file",onChange:e=>{const a=Array.from(e.target.files);if(a.length+F.existingImages.length-F.deleteImages.length>10)return void alert("Maximum 10 images allowed. You can add ".concat(10-(F.existingImages.length-F.deleteImages.length)," more."));const s=a.map(e=>({url:URL.createObjectURL(e),name:e.name,file:e}));J((0,t.A)((0,t.A)({},H),{},{new:[...H.new,...s]})),M((0,t.A)((0,t.A)({},F),{},{newImages:[...F.newImages,...a]}))},multiple:!0,accept:"image/*",id:"editProductImages",className:"file-input"}),(0,n.jsxs)("label",{htmlFor:"editProductImages",className:"file-label",children:[(0,n.jsx)("i",{className:"fas fa-cloud-upload-alt"})," Add More Images"]}),(0,n.jsxs)("span",{className:"file-info",children:[F.newImages.length," new file(s) selected"]})]}),(0,n.jsx)("small",{children:"Click on an image to set it as the main product image."})]}),F.existingImages.length-F.deleteImages.length>0&&(0,n.jsxs)("div",{className:"image-section",children:[(0,n.jsx)("h4",{children:"Current Images"}),(0,n.jsx)("div",{className:"image-preview-container",children:F.existingImages.filter(e=>!F.deleteImages.includes(e.id)).map(e=>(0,n.jsxs)("div",{className:"image-preview ".concat(e.id===F.mainImageId?"main-image":""),onClick:()=>ae(e.id),children:[(0,n.jsx)("img",{src:ge(e.url),alt:"Product",className:"preview-img"}),e.id===F.mainImageId&&(0,n.jsx)("div",{className:"main-badge",children:"MAIN"}),(0,n.jsx)("button",{type:"button",onClick:a=>{a.stopPropagation(),(e=>{if(!F.existingImages.find(a=>a.id===e))return;const a=[...F.deleteImages,e],s=F.existingImages.filter(a=>a.id!==e);let l=F.mainImageId;F.mainImageId===e&&(l=s.length>0?s[0].id:null),M((0,t.A)((0,t.A)({},F),{},{existingImages:s,deleteImages:a,mainImageId:l})),J((0,t.A)((0,t.A)({},H),{},{existing:H.existing.filter(a=>a.id!==e)}))})(e.id)},className:"remove-image-btn",children:"\xd7"})]},e.id))})]}),F.newImages.length>0&&(0,n.jsxs)("div",{className:"image-section",children:[(0,n.jsx)("h4",{children:"New Images"}),(0,n.jsx)("div",{className:"image-preview-container",children:H.new.map((e,a)=>(0,n.jsxs)("div",{className:"image-preview ".concat(null===F.mainImageId&&F.mainImageIndex===a?"main-image":""),onClick:()=>ae(null,!0,a),children:[(0,n.jsx)("img",{src:e.url,alt:e.name,className:"preview-img"}),null===F.mainImageId&&F.mainImageIndex===a&&(0,n.jsx)("div",{className:"main-badge",children:"MAIN"}),(0,n.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{const a=[...F.newImages];a.splice(e,1);const s=[...H.new];URL.revokeObjectURL(s[e].url),s.splice(e,1);let l=F.mainImageIndex;null===F.mainImageId&&null!==F.mainImageIndex&&(e===F.mainImageIndex?l=null:e<F.mainImageIndex&&(l=F.mainImageIndex-1)),M((0,t.A)((0,t.A)({},F),{},{newImages:a,mainImageIndex:l})),J((0,t.A)((0,t.A)({},H),{},{new:s}))})(a)},className:"remove-image-btn",children:"\xd7"}),(0,n.jsx)("div",{className:"image-name",children:e.name})]},a))})]}),F.existingImages.length-F.deleteImages.length===0&&0===F.newImages.length&&(0,n.jsxs)("div",{className:"no-images",children:[(0,n.jsx)("i",{className:"fas fa-images"}),(0,n.jsx)("p",{children:"No images available"}),(0,n.jsx)("span",{children:"Upload at least one image for your product"})]})]})]}),(0,n.jsxs)("div",{className:"form-actions modal-actions",children:[(0,n.jsxs)("button",{type:"button",onClick:ue,className:"cancel-button",children:[(0,n.jsx)("i",{className:"fas fa-times"})," Cancel"]}),(0,n.jsx)("button",{type:"submit",disabled:K,className:"save-button",children:K?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-spinner fa-spin"})," Saving..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-save"})," Save Changes"]})})]})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"product-gallery",children:[(0,n.jsx)("div",{className:"main-product-image",children:h.images&&h.images.length>0?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:ge(h.images[y].url),alt:h.name,onError:xe}),h.images.length>1&&(0,n.jsxs)("div",{className:"modal-image-controls",children:[(0,n.jsx)("button",{className:"modal-image-nav prev",onClick:()=>{h&&h.images&&h.images.length>1&&k(e=>(e-1+h.images.length)%h.images.length)},"aria-label":"Previous image",children:(0,n.jsx)("i",{className:"fas fa-chevron-left"})}),(0,n.jsxs)("span",{className:"image-count",children:[y+1," / ",h.images.length]}),(0,n.jsx)("button",{className:"modal-image-nav next",onClick:()=>{h&&h.images&&h.images.length>1&&k(e=>(e+1)%h.images.length)},"aria-label":"Next image",children:(0,n.jsx)("i",{className:"fas fa-chevron-right"})})]})]}):(0,n.jsx)("div",{className:"no-image",children:"No image available"})}),h.images&&h.images.length>1&&(0,n.jsx)("div",{className:"product-thumbnails",children:h.images.map((e,a)=>(0,n.jsx)("div",{className:"thumbnail ".concat(a===y?"active-thumbnail":""),onClick:()=>k(a),children:(0,n.jsx)("img",{src:ge(e.url),alt:"".concat(h.name," ").concat(a+1)})},a))})]}),(0,n.jsxs)("div",{className:"product-details",children:[(0,n.jsxs)("div",{className:"product-meta-header",children:[(0,n.jsxs)("div",{className:"product-badges",children:[(0,n.jsx)("span",{className:"product-type","data-type":h.type,children:h.type.replace("_"," ")}),h.is_featured&&(0,n.jsxs)("span",{className:"featured-tag",children:[(0,n.jsx)("i",{className:"fas fa-star"})," Featured"]})]}),(0,n.jsxs)("div",{className:"product-sku",children:["SKU: ",h.sku]})]}),(0,n.jsx)("h1",{className:"product-title",children:h.name}),(0,n.jsxs)("div",{className:"product-categories",children:[(0,n.jsx)("span",{className:"category",children:h.category}),h.subcategory&&(0,n.jsx)("span",{className:"subcategory",children:h.subcategory})]}),(0,n.jsxs)("div",{className:"product-pricing",children:[(0,n.jsx)("div",{className:"current-price",children:he(h.price)}),h.compare_price&&(0,n.jsx)("div",{className:"compare-price",children:he(h.compare_price)})]}),(0,n.jsxs)("div",{className:"product-stock",children:["Stock: ",(0,n.jsxs)("span",{children:[h.stock_quantity||"0"," units"]})]}),(0,n.jsxs)("div",{className:"product-description",children:[(0,n.jsx)("h3",{children:"Description"}),(0,n.jsx)("p",{children:h.description})]}),(0,n.jsxs)("div",{className:"product-technical",children:[(0,n.jsx)("h3",{children:"Technical Details"}),(0,n.jsxs)("div",{className:"technical-grid",children:[h.dimensions&&(0,n.jsxs)("div",{className:"technical-item",children:[(0,n.jsx)("strong",{children:"Dimensions"}),(0,n.jsx)("span",{children:h.dimensions})]}),h.tolerance&&(0,n.jsxs)("div",{className:"technical-item",children:[(0,n.jsx)("strong",{children:"Tolerance"}),(0,n.jsx)("span",{children:h.tolerance})]}),h.weight&&(0,n.jsxs)("div",{className:"technical-item",children:[(0,n.jsx)("strong",{children:"Weight"}),(0,n.jsx)("span",{children:h.weight})]}),h.standards&&(0,n.jsxs)("div",{className:"technical-item",children:[(0,n.jsx)("strong",{children:"Standards"}),(0,n.jsx)("span",{children:h.standards})]})]})]}),h.materials&&h.materials.length>0&&(0,n.jsxs)("div",{className:"product-materials",children:[(0,n.jsx)("h3",{children:"Materials"}),(0,n.jsx)("div",{className:"materials-list",children:h.materials.map((e,a)=>(0,n.jsx)("span",{className:"material-tag",children:e},a))})]}),h.flaws&&(0,n.jsxs)("div",{className:"product-flaws",children:[(0,n.jsx)("h3",{children:"Flaws/Defects"}),(0,n.jsx)("p",{children:h.flaws})]}),h.specifications&&Object.keys(h.specifications).length>0&&(0,n.jsxs)("div",{className:"product-specifications",children:[(0,n.jsx)("h3",{children:"Specifications"}),(0,n.jsx)("div",{className:"specifications-list",children:Object.entries(h.specifications).map((e,a)=>{let[s,t]=e;return(0,n.jsxs)("div",{className:"specification-item",children:[(0,n.jsx)("div",{className:"spec-key",children:s}),(0,n.jsx)("div",{className:"spec-value",children:t})]},a)})})]}),h.features&&Object.keys(h.features).length>0&&(0,n.jsxs)("div",{className:"product-features",children:[(0,n.jsx)("h3",{children:"Features"}),(0,n.jsx)("div",{className:"features-list",children:Object.entries(h.features).map((e,a)=>{let[s,t]=e;return(0,n.jsxs)("div",{className:"feature-item",children:[(0,n.jsx)("div",{className:"feature-key",children:s}),(0,n.jsx)("div",{className:"feature-value",children:t})]},a)})})]}),(0,n.jsxs)("div",{className:"meta-data-section",children:[(0,n.jsx)("h3",{children:"SEO & Meta Data"}),(0,n.jsxs)("div",{className:"meta-data-grid",children:[(0,n.jsxs)("div",{className:"meta-item",children:[(0,n.jsx)("strong",{children:"Meta Title"}),(0,n.jsx)("span",{children:h.meta_title||h.name})]}),(0,n.jsxs)("div",{className:"meta-item",children:[(0,n.jsx)("strong",{children:"Meta Description"}),(0,n.jsx)("span",{children:h.meta_description||"Not set"})]}),(0,n.jsxs)("div",{className:"meta-item",children:[(0,n.jsx)("strong",{children:"Meta Keywords"}),(0,n.jsx)("span",{children:h.meta_keywords||"Not set"})]})]})]})]})]})}),(0,n.jsx)("div",{className:"modal-footer",children:f?(0,n.jsxs)("div",{className:"footer-actions",children:[(0,n.jsxs)("button",{onClick:ue,className:"cancel-button",children:[(0,n.jsx)("i",{className:"fas fa-times"})," Cancel"]}),(0,n.jsx)("button",{onClick:re,disabled:K,className:"save-button",children:K?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-spinner fa-spin"})," Saving..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("i",{className:"fas fa-save"})," Save Changes"]})})]}):(0,n.jsxs)("div",{className:"footer-actions",children:[(0,n.jsxs)("button",{onClick:()=>j(!1),className:"close-modal-button",children:[(0,n.jsx)("i",{className:"fas fa-times"})," Close"]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("button",{onClick:()=>{v(!0)},className:"edit-button",children:[(0,n.jsx)("i",{className:"fas fa-edit"})," Edit Product"]}),(0,n.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this product? This action cannot be undone.")&&de(h.id)},className:"delete-button",children:[(0,n.jsx)("i",{className:"fas fa-trash-alt"})," Delete"]})]})]})})]})})]})}}}]);
//# sourceMappingURL=362.b97ee227.chunk.js.map